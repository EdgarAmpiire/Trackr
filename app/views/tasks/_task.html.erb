<div id="<%= dom_id(task) %>" 
     class="bg-white shadow p-4 rounded flex justify-between items-center hover:bg-gray-50 transition">

  <div>
    <!-- Task title -->
    <h3 class="text-lg font-semibold <%= 'line-through text-gray-400' if task.completed %>">
      <%= link_to task.title, task, class: "hover:underline" %>
    </h3>

    <!-- Task description -->
    <% if task.description.present? %>
      <p class="text-sm text-gray-500">
        <%= truncate(task.description, length: 60) %>
      </p>
    <% end %>

    <!-- Added by user -->
    <p class="text-xs text-gray-400 mt-1">
      Added by <%= task.user&.email || "Unknown user" %>
    </p>
  </div>

  <!-- Buttons -->
  <div class="flex gap-2">
    <%= button_to (task.completed ? "Mark Incomplete" : "Mark Complete"),
      toggle_complete_task_path(task),
      method: :patch,
      form: { data: { turbo_stream: true } },
      class: "#{task.completed ? 'bg-gray-500' : 'bg-green-600'} text-white px-3 py-1 rounded hover:opacity-90" %>

    <%= link_to "Edit", edit_task_path(task),
      class: "bg-yellow-500 text-white px-3 py-1 rounded hover:opacity-90" %>

    <%= link_to "Delete", task,
      data: { turbo_confirm: "Are you sure?" },
      method: :delete,
      class: "bg-red-600 text-white px-3 py-1 rounded hover:opacity-90" %>
  </div>
</div>
